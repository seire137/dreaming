<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>My Player Blog</title>
    <style>
        /* CSS: ë””ìì¸ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤ */
        body {
            background-color: #2c2c2c;
            color: white;
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .player-card {
            width: 350px;
            padding: 20px;
            text-align: center;
        }

        /* ì•¨ë²” í™”ë©´ (ê²Œì‹œê¸€ ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€) */
        .album-art {
            width: 100%;
            aspect-ratio: 1 / 1;
            background-color: #444;
            border-radius: 20px;
            background-size: cover;
            background-position: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            margin-bottom: 30px;
        }

        /* ê²Œì‹œê¸€ ì •ë³´ */
        .song-name { font-size: 1.5rem; font-weight: bold; margin: 10px 0; }
        .pair-name { font-size: 1rem; color: #aaa; margin-bottom: 20px; }

        /* í”„ë¡œê·¸ë ˆìŠ¤ ë°” (ì¥ì‹ìš©) */
        .progress-bar {
            width: 100%;
            height: 4px;
            background: #555;
            border-radius: 2px;
            margin-bottom: 30px;
            position: relative;
        }
        .progress-current {
            width: 40%;
            height: 100%;
            background: white;
            border-radius: 2px;
        }

        /* ì»¨íŠ¸ë¡¤ ë²„íŠ¼ ë°°ì¹˜ */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .btn:hover { transform: scale(1.1); }
        .btn-play { font-size: 3rem; } /* ì¬ìƒ ë²„íŠ¼ì€ ë” í¬ê²Œ */
    </style>
</head>
<body>

<div class="player-card">
    <div id="albumArt" class="album-art"></div>

    <div id="songName" class="song-name">ê²Œì‹œê¸€ ì œëª©</div>
    <div id="pairName" class="pair-name">#íƒœê·¸ #ì •ë³´</div>

    <div class="progress-bar">
        <div class="progress-current"></div>
    </div>

    <div class="controls">
        <button class="btn" onclick="openMenu()">â˜°</button> <button class="btn" onclick="prevPost()">â®</button> <button class="btn btn-play" onclick="enterPost()">â–¶</button> <button class="btn" onclick="nextPost()">â­</button> <button class="btn" onclick="toggleShuffle()">ğŸ”€</button> </div>
</div>

<script>
    /* JS: ë™ì‘ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤ (íŒŒì´ì¬ì˜ ë¦¬ìŠ¤íŠ¸ ê°œë… í™œìš©) */

    // 1. ë°ì´í„°ë² ì´ìŠ¤ (ë‚˜ì¤‘ì— êµ¬ê¸€ ì‹œíŠ¸ì™€ ì—°ê²°ë  ë¶€ë¶„ì…ë‹ˆë‹¤)
    const posts = [
// ì‹œíŠ¸ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
fetch('https://script.google.com/macros/s/AKfycby6wtp_vKh5ie5SBSHY5x0LwlMWkPjeTbed5vy8UZUGXlrNmEzaWb483F-vh12LBJS3/exec')
  .then(response => response.json())
  .then(data => {
    posts = data; // ë¶ˆëŸ¬ì˜¨ ë°ì´í„°ë¥¼ ë¦¬ìŠ¤íŠ¸ì— í• ë‹¹
    updatePlayer(); // í™”ë©´ ì—…ë°ì´íŠ¸
  });
    ];

    let currentIndex = 0; // í˜„ì¬ ë³´ê³  ìˆëŠ” ê²Œì‹œê¸€ ë²ˆí˜¸

    // 2. í™”ë©´ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
    function updatePlayer() {
        const post = posts[currentIndex];
        document.getElementById('songName').innerText = post.title;
        document.getElementById('pairName').innerText = post.tags;
        document.getElementById('albumArt').style.backgroundImage = `url('${post.img}')`;
    }

    // 3. ë²„íŠ¼ ê¸°ëŠ¥ë“¤
    function nextPost() {
        currentIndex = (currentIndex + 1) % posts.length; // ë¦¬ìŠ¤íŠ¸ ëìœ¼ë¡œ ê°€ë©´ ë‹¤ì‹œ ì²˜ìŒìœ¼ë¡œ
        updatePlayer();
    }

    function prevPost() {
        currentIndex = (currentIndex - 1 + posts.length) % posts.length;
        updatePlayer();
    }

    function enterPost() {
        const url = posts[currentIndex].url;
        alert(url + " í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤!"); 
        // window.location.href = url; // ì‹¤ì œ í˜ì´ì§€ ì´ë™ ì‹œ ì‚¬ìš©
    }

    function openMenu() {
        alert("ë©”ë‰´ ëª©ë¡ì„ ì—½ë‹ˆë‹¤.");
    }

    // ì´ˆê¸° í™”ë©´ ì‹¤í–‰
    updatePlayer();
</script>

</body>
</html>
